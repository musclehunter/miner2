{
  "project_name": "採掘人 (Miner Game)",
  "version": "0.1.0",
  "last_updated": "2025-06-11T22:55:00+09:00",
  "description": "プレイヤーが鉱石を掘って売るブラウザシミュレーションゲーム",
  "tech_stack": {
    "backend": {
      "language": "Go",
      "framework": "Gin",
      "database": ["MySQL", "Redis"],
      "important_packages": [
        "github.com/gin-gonic/gin",
        "github.com/go-sql-driver/mysql",
        "github.com/golang-jwt/jwt/v4",
        "github.com/google/uuid",
        "golang.org/x/crypto/bcrypt",
        "github.com/go-redis/redis/v8"
      ]
    },
    "frontend": {
      "language": "JavaScript",
      "framework": "Vue.js",
      "important_packages": [
        "axios",
        "vue-router",
        "vuex"
      ]
    },
    "deployment": {
      "containerization": "Docker",
      "orchestration": "Docker Compose"
    }
  },
  "project_structure": {
    "backend": {
      "models": "データモデル定義",
      "handlers": "APIエンドポイントのハンドラー",
      "database": "データベース関連の処理",
      "middleware": "ミドルウェア（認証など）",
      "cache": "Redisキャッシュ管理",
      "mail": "メール送信機能"
    },
    "frontend": {
      "src/components": "Vueコンポーネント",
      "src/views": "画面ビュー",
      "src/services": "APIサービス",
      "src/store": "Vuexストア"
    },
    "docker": {
      "mysql": "MySQLコンテナ設定",
      "redis": "Redisコンテナ設定"
    }
  },
  "data_models": {
    "User": {
      "fields": ["ID", "Email", "PasswordHash", "Salt", "CreatedAt", "UpdatedAt"],
      "description": "ユーザー情報を管理"
    },
    "PendingUser": {
      "fields": ["Email", "Name", "Password"],
      "description": "メール確認待ちの仮登録ユーザー情報を管理"
    },
    "Town": {
      "fields": ["ID", "Name", "Description", "PositionX", "PositionY", "CreatedAt", "UpdatedAt"],
      "description": "町の情報とマップ上の座標を管理"
    },
    "Ore": {
      "fields": ["ID", "Name", "Rarity", "Purity", "ProcessingDifficulty", "CreatedAt", "UpdatedAt"],
      "description": "鉱石の情報を管理"
    },
    "Item": {
      "fields": ["ID", "Name", "Rarity", "Description", "CreatedAt", "UpdatedAt"],
      "description": "アイテムの情報を管理"
    },
    "Worker": {
      "fields": ["ID", "Level", "Name", "Strength", "Stamina", "Agility", "Intelligence", "Luck"],
      "description": "労働者（キャラクター）の情報を管理"
    },
    "PlayerInventory": {
      "fields": ["ID", "UserID", "Gold", "MaxCapacity", "CurrentCapacity", "UpdatedAt"],
      "description": "プレイヤーの所持金と在庫容量を管理"
    },
    "PlayerOre": {
      "fields": ["ID", "UserID", "OreID", "Quantity", "UpdatedAt"],
      "description": "プレイヤーが所持する鉱石の数量を管理"
    },
    "PlayerItem": {
      "fields": ["ID", "UserID", "ItemID", "Quantity", "UpdatedAt"],
      "description": "プレイヤーが所持するアイテムの数量を管理"
    },
    "PlayerBase": {
      "fields": ["ID", "UserID", "TownID", "Level", "CreatedAt", "UpdatedAt"],
      "description": "プレイヤーの拠点情報を管理"
    }
  },
  "api_endpoints": {
    "auth": {
      "/api/auth/signup": {
        "method": "POST",
        "description": "新規ユーザー登録",
        "request_body": {
          "email": "string",
          "password": "string",
          "name": "string"
        },
        "response": {
          "token": "string",
          "user": "User object"
        }
      },
      "/api/auth/login": {
        "method": "POST",
        "description": "ユーザーログイン",
        "request_body": {
          "email": "string",
          "password": "string"
        },
        "response": {
          "token": "string",
          "user": "User object"
        }
      },
      "/api/auth/me": {
        "method": "GET",
        "description": "現在のユーザー情報取得",
        "auth_required": true,
        "response": {
          "user": "User object"
        }
      },
      "/api/auth/verify-email": {
        "method": "GET",
        "description": "メールアドレス確認",
        "query_params": {
          "token": "string"
        },
        "response": {
          "message": "string"
        }
      },
      "/api/auth/resend-verification": {
        "method": "POST",
        "description": "確認メール再送信",
        "request_body": {
          "email": "string"
        },
        "response": {
          "message": "string"
        }
      }
    },
    "admin": {
      "/api/admin/users": {
        "method": "GET",
        "description": "全ユーザー一覧取得",
        "auth_required": true,
        "admin_required": true,
        "response": {
          "users": "Array of User objects"
        }
      },
      "/api/admin/users_get/:id": {
        "method": "GET",
        "path": "/api/admin/users/:id",
        "description": "ユーザー詳細取得",
        "auth_required": true,
        "admin_required": true,
        "response": {
          "user": "User object"
        }
      },
      "/api/admin/users_update/:id": {
        "method": "PUT",
        "path": "/api/admin/users/:id",
        "description": "ユーザー情報更新",
        "auth_required": true,
        "admin_required": true,
        "request_body": {
          "email": "string",
          "name": "string"
        },
        "response": {
          "message": "string",
          "user": "User object"
        }
      },
      "/api/admin/users_delete/:id": {
        "method": "DELETE",
        "path": "/api/admin/users/:id",
        "description": "ユーザー削除",
        "auth_required": true,
        "admin_required": true,
        "response": {
          "message": "string"
        }
      },
      "/api/admin/pending-users": {
        "method": "GET",
        "description": "未確認ユーザー一覧取得",
        "auth_required": true,
        "admin_required": true,
        "response": {
          "pendingUsers": "Array of PendingUser objects"
        }
      },
      "/api/admin/pending-users/:token": {
        "method": "DELETE",
        "description": "未確認ユーザーの削除",
        "auth_required": true,
        "admin_required": true,
        "response": {
          "message": "string"
        }
      },
      "/api/admin/towns_list": {
        "method": "GET",
        "path": "/api/admin/towns",
        "description": "町一覧取得（管理用）",
        "auth_required": true,
        "admin_required": true,
        "response": {
          "towns": "Array of Town objects"
        }
      },
      "/api/admin/towns_create": {
        "method": "POST",
        "path": "/api/admin/towns",
        "description": "新規町作成",
        "auth_required": true,
        "admin_required": true,
        "request_body": {
          "name": "string",
          "description": "string"
        },
        "response": {
          "message": "string",
          "town": "Town object"
        }
      },
      "/api/admin/towns_update/:id": {
        "method": "PUT",
        "path": "/api/admin/towns/:id",
        "description": "町情報更新",
        "auth_required": true,
        "admin_required": true,
        "request_body": {
          "name": "string",
          "description": "string"
        },
        "response": {
          "message": "string",
          "town": "Town object"
        }
      },
      "/api/admin/towns_delete/:id": {
        "method": "DELETE",
        "path": "/api/admin/towns/:id",
        "description": "町削除",
        "auth_required": true,
        "admin_required": true,
        "response": {
          "message": "string"
        }
      },
      "/api/admin/bases": {
        "method": "GET",
        "description": "全拠点情報取得",
        "auth_required": true,
        "admin_required": true,
        "response": {
          "bases": "Array of PlayerBase objects"
        }
      }
    },
    "game": {
      "/api/game/towns": {
        "method": "GET",
        "description": "全ての町情報取得",
        "response": {
          "towns": "Array of Town objects"
        }
      },
      "/api/game/towns/:id": {
        "method": "GET",
        "description": "特定の町情報取得",
        "response": {
          "town": "Town object"
        }
      },
      "/api/game/ores": {
        "method": "GET",
        "description": "全ての鉱石情報取得",
        "response": {
          "ores": "Array of Ore objects"
        }
      },
      "/api/game/ores/:id": {
        "method": "GET",
        "description": "特定の鉱石情報取得",
        "response": {
          "ore": "Ore object"
        }
      },
      "/api/game/my/inventory": {
        "method": "GET",
        "description": "プレイヤーの在庫情報（所持金、鉱石、アイテム）をまとめて取得",
        "auth_required": true,
        "response": {
          "inventory": "PlayerInventory object",
          "ores": "Array of PlayerOre objects with related Ore details",
          "items": "Array of PlayerItem objects with related Item details"
        }
      }
    }
  },
  "development_environment": {
    "setup": "docker-compose up -d",
    "backend_restart": "docker-compose restart backend",
    "frontend_restart": "docker-compose restart frontend",
    "database_access": "docker-compose exec db mysql -u root -p minerdb",
    "logs": "docker-compose logs -f"
  },
  "implementation_status": {
    "auth_system": "完了",
    "email_verification": "完了",
    "admin_interface": "完了",
    "town_management": "完了",
    "ore_management": "完了",
    "redis_cache": "完了",
    "player_inventory": "完了",
    "mining_mechanics": "未実装",
    "frontend_integration": "進行中"
  },
  "future_tasks": [
    "採掘メカニズムの実装",
    "町ごとに異なる鉱石の出現率や特性の設定",
    "採掘の成功率や採掘量の計算ロジックの実装",
    "フロントエンドとの連携強化"
  ],
  "important_files": {
    "backend": [
      "/backend/simple_server.go",
      "/backend/models/user.go",
      "/backend/models/town.go",
      "/backend/models/ore.go",
      "/backend/models/item.go",
      "/backend/models/pending_user.go",
      "/backend/models/player_inventory.go",
      "/backend/models/player_ore.go",
      "/backend/models/player_item.go",
      "/backend/handlers/auth.go",
      "/backend/handlers/game.go",
      "/backend/handlers/admin.go",
      "/backend/handlers/pending_users.go",
      "/backend/database/user_repository.go",
      "/backend/database/town_repository.go",
      "/backend/database/ore_repository.go",
      "/backend/database/item_repository.go",
      "/backend/database/player_inventory_repository.go",
      "/backend/database/player_ore_repository.go",
      "/backend/database/player_item_repository.go",
      "/backend/database/initial_data.go",
      "/backend/cache/redis.go",
      "/backend/mail/mail.go"
    ],
    "frontend": [
      "/frontend/src/main.js",
      "/frontend/src/App.vue",
      "/frontend/src/services/auth.js",
      "/frontend/src/services/api.js"
    ],
    "deployment": [
      "/docker-compose.yml",
      "/docker/mysql/init/01-schema.sql"
    ],
    "docs": [
      "/docs/implementation_status.md",
      "/readme.md"
    ]
  }
}
